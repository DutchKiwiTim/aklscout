<<<<<<< HEAD
const client_id="&client_id=Q5PQQNTJS4UGM10I1RWODUVC4XS2PBULBDYZKFLAFECJ4ZIM",client_secret="&client_secret=4TMTXMB4LL35O3GR1QXONNBAJ5OCGZUO5HLWAQQGSHHPZZV2";function identifyCategory(e){let t='0',o='0';'jsCatParks'==e.id?createSearchRequestURI(t='2000',o='4bf58dd8d48988d163941735'):'jsCatBeaches'==e.id?createSearchRequestURI(t='2000',o='4bf58dd8d48988d1e2941735'):'jsCatLookouts'==e.id&&createSearchRequestURI(t='2000',o='4bf58dd8d48988d165941735')}function createSearchRequestURI(e,t){makeSearchRequest('https://api.foursquare.com/v2/venues/search?v=20170901'+client_id+client_secret+"&ll=-36.8786499,174.7602798"+('&radius='+e)+('&categoryId='+t))}function makeSearchRequest(e){fetch(e).then(function(e){return e.json()}).then(function(e){extractNeededData(e.response.venues)}).catch(function(){console.log('Houston we have a problem...')})}function extractNeededData(e){const t=[];e.forEach(e=>{t.push({name:e.name,lat:e.location.lat,lng:e.location.lng})}),console.log(t)}const jsCatDropdown=document.getElementById('jsCatDropdown'),jsCatTrending=document.getElementById('jsCatTrending'),jsCatParks=document.getElementById('jsCatParks'),jsCatBeaches=document.getElementById('jsCatBeaches'),jsCatLookouts=document.getElementById('jsCatLookouts');function createMap(e){jsCatDropdown.addEventListener('click',e=>{identifyCategory(e.target)});let t=[-36.8977931,174.7854973],o=L.map('mapid').setView(t,e);L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidGhhbHl4OTAiLCJhIjoiY2o2YjdrZHRlMWJmYjJybDd2cW1rYnVnNSJ9.j_DQLfixHfhioVjH6qmqkw',{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:'mapbox.streets',accessToken:'pk.eyJ1IjoibmlraXRhaG9pbmVzIiwiYSI6ImNqc203cHN5NDEwaGg0OXBpYnE0aXhhZmYifQ.58l8dUZg4uiFn7BYnZCJFA'}).addTo(o),L.circle(t,{radius:21500,color:'salmon',weight:1,fill:!0}).addTo(o),modal()}$(function(){if($(window).width()<768){let e=10;console.log('less than 768'),createMap(e)}else{let e=11;console.log('more than 768'),createMap(e)}});const version='?v=20170901',key=version+client_id+client_secret,venueId='59a45921351e3d43b07028b5',venueUrl='https://api.foursquare.com/v2/venues/'+venueId,jsPopUpButton=document.getElementById('#modalCenter'),jsModalLongTitle=document.getElementById('jsModalLongTitle'),jsVenueImg=document.getElementById('jsVenueImg'),jsVenueDescription=document.getElementById('jsVenueDescription'),jsVenueWebsite=document.getElementById('jsVenueWebsite'),jsMiniMap=document.getElementById('jsMiniMap'),jsDirections=document.getElementById('jsDirections');function modal(){$('#modalCenter').on('shown.bs.modal',function(){showVenueDetails()})}function showVenueDetails(){let e='https://api.foursquare.com/v2/venues/'+this.venueid+key;$.ajax({url:e,dataType:'jsonp',success:function(e){if(console.log(e),jsModalLongTitle.innerHTML(e.response.venue.name),$('.modal-body').empty(),$('.modal-footer').empty(),void 0!==e.response.venue.description&&jsVenueDescription.innerHTML(e.response.venue.description),e.response.venue.photos.groups.length>0){var t=e.response.venue.bestPhoto.prefix,o=e.response.venue.bestPhoto.suffix;jsVenueImg.src(t+'100x100'+o)}void 0!==e.response.venue.contact.phone&&$('.modal-body').append('<p class="phone"><span class="bold">Phone:</span> '+e.response.venue.contact.phone+'</p>'),void 0!==e.response.venue.location.address&&jsVenueWebsite.innerHTML(e.response.venue.location.address+', '+e.response.venue.location.city);let n=L.map('jsMiniMap',{scrollWheelZoom:!1}).setView([-36.8977931,174.7854973],17);L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:'mapbox.streets',accessToken:'pk.eyJ1IjoibmlraXRhaG9pbmVzIiwiYSI6ImNqc203cHN5NDEwaGg0OXBpYnE0aXhhZmYifQ.58l8dUZg4uiFn7BYnZCJFA'}).addTo(n),$('#myModal').modal('show')}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImlkZW50aWZ5Q2F0ZWdvcnkiLCJlIiwiY2hvc2VuUmFkaXVzIiwiY2hvc2VuQ2F0ZWdvcnkiLCJpZCIsImNyZWF0ZVNlYXJjaFJlcXVlc3RVUkkiLCJyYWQiLCJjYXQiLCJtYWtlU2VhcmNoUmVxdWVzdCIsInVyaSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsIm15SnNvbiIsImV4dHJhY3ROZWVkZWREYXRhIiwidmVudWVzIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInZlbnVlc0Zvck1hcCIsImZvckVhY2giLCJ2ZW51ZSIsInB1c2giLCJuYW1lIiwibGF0IiwibG9jYXRpb24iLCJsbmciLCJqc0NhdERyb3Bkb3duIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImpzQ2F0VHJlbmRpbmciLCJqc0NhdFBhcmtzIiwianNDYXRCZWFjaGVzIiwianNDYXRMb29rb3V0cyIsImNyZWF0ZU1hcCIsInoiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY2VudGVyIiwibXltYXAiLCJMIiwibWFwIiwic2V0VmlldyIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwibWF4Wm9vbSIsImFjY2Vzc1Rva2VuIiwiYWRkVG8iLCJjaXJjbGUiLCJyYWRpdXMiLCJjb2xvciIsIndlaWdodCIsImZpbGwiLCJtb2RhbCIsIiQiLCJ3aW5kb3ciLCJ3aWR0aCIsInpvb20iLCJ2ZXJzaW9uIiwia2V5IiwidmVudWVJZCIsInZlbnVlVXJsIiwianNQb3BVcEJ1dHRvbiIsImpzTW9kYWxMb25nVGl0bGUiLCJqc1ZlbnVlSW1nIiwianNWZW51ZURlc2NyaXB0aW9uIiwianNWZW51ZVdlYnNpdGUiLCJqc01pbmlNYXAiLCJqc0RpcmVjdGlvbnMiLCJvbiIsInNob3dWZW51ZURldGFpbHMiLCJ0aGlzIiwidmVudWVpZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXMiLCJpbm5lckhUTUwiLCJlbXB0eSIsInVuZGVmaW5lZCIsImRlc2NyaXB0aW9uIiwicGhvdG9zIiwiZ3JvdXBzIiwibGVuZ3RoIiwicGhvdG9QcmVmaXgiLCJiZXN0UGhvdG8iLCJwcmVmaXgiLCJwaG90b1N1ZmZpeCIsInN1ZmZpeCIsInNyYyIsImNvbnRhY3QiLCJwaG9uZSIsImFwcGVuZCIsImFkZHJlc3MiLCJjaXR5IiwibWluaU1hcCIsInNjcm9sbFdoZWVsWm9vbSJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTUEsVUFBWSw4REFDWkMsY0FBZ0Isa0VBVXRCLFNBQVNDLGlCQUFpQkMsR0FFeEIsSUFBSUMsRUFBZSxJQUNmQyxFQUFpQixJQUVULGNBQVJGLEVBQUVHLEdBR0pDLHVCQUZBSCxFQUFlLE9BQ2ZDLEVBQWlCLDRCQUdBLGdCQUFSRixFQUFFRyxHQUdYQyx1QkFGQUgsRUFBZSxPQUNmQyxFQUFpQiw0QkFHQSxpQkFBUkYsRUFBRUcsSUFHWEMsdUJBRkFILEVBQWUsT0FDZkMsRUFBaUIsNEJBT3JCLFNBQVNFLHVCQUF1QkMsRUFBS0MsR0FZbkNDLGtCQVhnQix5REFTYVYsVUFBWUMsY0FOekIsK0JBRUQsV0FBYU8sSUFFVCxlQUFpQkMsSUFTdEMsU0FBU0Msa0JBQWtCQyxHQUN6QkMsTUFBTUQsR0FDSEUsS0FBSyxTQUFTQyxHQUNiLE9BQU9BLEVBQVNDLFNBRWpCRixLQUFLLFNBQVNHLEdBQ2JDLGtCQUFrQkQsRUFBT0YsU0FBU0ksVUFJbkNDLE1BQU0sV0FFTEMsUUFBUUMsSUFBSSxrQ0FNbEIsU0FBU0osa0JBQWtCSyxHQUd6QixNQUFNQyxFQUFlLEdBRXJCRCxFQUFLRSxRQUFRQyxJQUVYRixFQUFhRyxLQUFLLENBQ2hCQyxLQUFNRixFQUFNRSxLQUNaQyxJQUFLSCxFQUFNSSxTQUFTRCxJQUNwQkUsSUFBS0wsRUFBTUksU0FBU0MsUUFJeEJWLFFBQVFDLElBQUlFLEdBZ0JkLE1BQU1RLGNBQWdCQyxTQUFTQyxlQUFlLGlCQUN4Q0MsY0FBZ0JGLFNB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aWFscyAtIFRpbVxuY29uc3QgY2xpZW50X2lkID0gJyZjbGllbnRfaWQ9JyArICdRNVBRUU5USlM0VUdNMTBJMVJXT0RVVkM0WFMyUEJVTEJEWVpLRkxBRkVDSjRaSU0nO1xuY29uc3QgY2xpZW50X3NlY3JldCA9ICcmY2xpZW50X3NlY3JldD0nICsgJzRUTVRYTUI0TEwzNU8zR1IxUVhPTk5CQUo1T0NHWlVPNUhMV0FRUUdTSEhQWlpWMic7XG5cbi8vIC8vIEZvdXJzcXVhcmUgQVBJIENyZWRlbnRpYWxzIC0gTmlraXRhXG4vLyBjb25zdCBjbGllbnRfaWQgPSAnJmNsaWVudF9pZD0nICsgJzJGMUpFQkdCWFdVQ0NLMVZTNU9aQUZUMkJFTFIxNU9DVk9CUkRFVkNKRktRTkRHTSc7XG4vLyBjb25zdCBjbGllbnRfc2VjcmV0ID0gJyZjbGllbnRfc2VjcmV0PScgKyAnVUlLMkJPSkZaMU9FWkpSQklNVzM1U09HUkIxTEZFVEpWV0lDQkFWQkU0SkpWQ0pQJztcblxuLy8gLy8gRm91cnNxdWFyZSBBUEkgQ3JlZGVudGlhbHMgLSBMb3VlbGxhXG4vLyBjb25zdCBjbGllbnRfaWQgPSAnJmNsaWVudF9pZD0nICsgJ0pTQkNMVUtTQUczQkQwRDFCT0lSTkFFTUtXVFFZMFA0MDFMSkNZRVRRUVhCUzNXMCc7XG4vLyBjb25zdCBjbGllbnRfc2VjcmV0ID0gJyZjbGllbnRfc2VjcmV0PScgKyAnSFNSUFJTUDFTUUpXVEczTk4yRU9CUENBU0hPNTJTQk9VNFpQRlhPSlBaWUlMM0RLJztcbi8vIFN0ZXAgMiAtIExpbmsgdGhlIGh0bWwgZWxlbWVudCB0byB0aGUgZm91cnNxdWFyZSBjYXRlZ29yeSBJRFxuZnVuY3Rpb24gaWRlbnRpZnlDYXRlZ29yeShlKSB7XG4gIC8vIGRlY2xhcmUgdmFyaWFibGVzXG4gIGxldCBjaG9zZW5SYWRpdXMgPSAnMCc7XG4gIGxldCBjaG9zZW5DYXRlZ29yeSA9ICcwJztcbiAgLy8gc2ltcGxlIGNvbmRpdGlvbmFsIHRvIG1hdGNoIHRoZSBET00gZWxlbWVudCB0byB0aGUgYXBpIElEXG4gIGlmIChlLmlkID09ICdqc0NhdFBhcmtzJykge1xuICAgIGNob3NlblJhZGl1cyA9ICcyMDAwJztcbiAgICBjaG9zZW5DYXRlZ29yeSA9ICc0YmY1OGRkOGQ0ODk4OGQxNjM5NDE3MzUnO1xuICAgIGNyZWF0ZVNlYXJjaFJlcXVlc3RVUkkoY2hvc2VuUmFkaXVzLCBjaG9zZW5DYXRlZ29yeSk7XG5cbiAgfSBlbHNlIGlmIChlLmlkID09ICdqc0NhdEJlYWNoZXMnKSB7XG4gICAgY2hvc2VuUmFkaXVzID0gJzIwMDAnO1xuICAgIGNob3NlbkNhdGVnb3J5ID0gJzRiZjU4ZGQ4ZDQ4OTg4ZDFlMjk0MTczNSc7XG4gICAgY3JlYXRlU2VhcmNoUmVxdWVzdFVSSShjaG9zZW5SYWRpdXMsIGNob3NlbkNhdGVnb3J5KTtcblxuICB9IGVsc2UgaWYgKGUuaWQgPT0gJ2pzQ2F0TG9va291dHMnKSB7XG4gICAgY2hvc2VuUmFkaXVzID0gJzIwMDAnO1xuICAgIGNob3NlbkNhdGVnb3J5ID0gJzRiZjU4ZGQ4ZDQ4OTg4ZDE2NTk0MTczNSc7XG4gICAgY3JlYXRlU2VhcmNoUmVxdWVzdFVSSShjaG9zZW5SYWRpdXMsIGNob3NlbkNhdGVnb3J5KTtcbiAgfVxufVxuXG5cbi8vIFN0ZXAgMyAtIENyZWF0ZSB0aGUgc2VhcmNoIHF1ZXJ5IHJlcXVlc3QgdXJpXG5mdW5jdGlvbiBjcmVhdGVTZWFyY2hSZXF1ZXN0VVJJKHJhZCwgY2F0KSB7XG4gIGNvbnN0IGJhc2VVUkkgPSAnaHR0cHM6Ly9hcGkuZm91cnNxdWFyZS5jb20vdjIvdmVudWVzL3NlYXJjaD92PTIwMTcwOTAxJztcbiAgLy8gY29uc3QgY2xpZW50X2lkID0gJyZjbGllbnRfaWQ9JyArICdRNVBRUU5USlM0VUdNMTBJMVJXT0RVVkM0WFMyUEJVTEJEWVpLRkxBRkVDSjRaSU0nO1xuICAvLyBjb25zdCBjbGllbnRfc2VjcmV0ID0gJyZjbGllbnRfc2VjcmV0PScgKyAnNFRNVFhNQjRMTDM1TzNHUjFRWE9OTkJBSjVPQ0daVU81SExXQVFRR1NISFBaWlYyJztcbiAgY29uc3QgbGF0bG9uZyA9ICcmbGw9JyArICctMzYuODc4NjQ5OSwxNzQuNzYwMjc5OCc7XG4gIC8vIFRoaXMgdmFsdWUgd2lsbCBiZSBhIHZhcmlhYmxlXG4gIGNvbnN0IHJhZGl1cyA9ICcmcmFkaXVzPScgKyByYWQ7XG4gIC8vIFRoaXMgdmFsdWUgd2lsbCBiZSBhIHZhcmlhYmxlXG4gIGNvbnN0IGNhdGVnb3J5SWQgPSAnJmNhdGVnb3J5SWQ9JyArIGNhdDtcbiAgLy8gUHV0IGFsbCB0aGUgcGllY2VzIHRvZ2V0aGVyXG4gIGNvbnN0IHJlcXVlc3RVUkkgPSBiYXNlVVJJICsgY2xpZW50X2lkICsgY2xpZW50X3NlY3JldCArIGxhdGxvbmcgKyByYWRpdXMgKyBjYXRlZ29yeUlkO1xuICBcbiAgbWFrZVNlYXJjaFJlcXVlc3QocmVxdWVzdFVSSSk7XG59XG5cblxuLy8gU3RlcCA0IC0gTWFrZSB0aGUgYWN0dWFsIHJlcXVlc3RcbmZ1bmN0aW9uIG1ha2VTZWFyY2hSZXF1ZXN0KHVyaSkge1xuICBmZXRjaCh1cmkpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbihteUpzb24pIHtcbiAgICAgIGV4dHJhY3ROZWVkZWREYXRhKG15SnNvbi5yZXNwb25zZS52ZW51ZXMpO1xuICAgICAgLy8gY29uc29sZS5sb2cobXlKc29uLnJlc3BvbnNlLnZlbnVlcyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShteUpzb24pKTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgIC8vIENvZGUgZm9yIGhhbmRsaW5nIGVycm9yc1xuICAgICAgY29uc29sZS5sb2coJ0hvdXN0b24gd2UgaGF2ZSBhIHByb2JsZW0uLi4nKTtcbiAgICB9KTtcbn1cblxuXG4vLyBTdGVwIDUgLSBFeHRyYWN0IHRoZSBkYXRhIHdlIGFyZSB1c2luZyBmcm9tIHRoZSBqc29uIHJlc3BvbnNlXG5mdW5jdGlvbiBleHRyYWN0TmVlZGVkRGF0YShkYXRhKSB7XG5cbiAgLy8gZGVjbGFyZSBlbXB0eSBhcnJheVxuICBjb25zdCB2ZW51ZXNGb3JNYXAgPSBbXTtcbiAgLy8gTG9vcCB0aHJvdWdoIGpzb24gcmVzcG9uc2VcbiAgZGF0YS5mb3JFYWNoKHZlbnVlID0+IHtcbiAgICAvLyBQdXNoIHRoZSB2YWx1ZXMgd2UgbmVlZCBpbnRvIGFuIGFycmF5IHRvIHVzZSBmb3IgdGhlIG1hcFxuICAgIHZlbnVlc0Zvck1hcC5wdXNoKHtcbiAgICAgIG5hbWU6IHZlbnVlLm5hbWUsXG4gICAgICBsYXQ6IHZlbnVlLmxvY2F0aW9uLmxhdCxcbiAgICAgIGxuZzogdmVudWUubG9jYXRpb24ubG5nXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKHZlbnVlc0Zvck1hcCk7XG59XG5cblxuICBcbi8vIFRpbSdzIHdvcmsgU1RBUlRcbi8vIENhdGVnb3JpZXM6XG4vLyBQYXJrczogNGJmNThkZDhkNDg5ODhkMTYzOTQxNzM1XG4vLyBCZWFjaGVzOiA0YmY1OGRkOGQ0ODk4OGQxZTI5NDE3MzVcbi8vIFBvb2xzOiA0YmY1OGRkOGQ0ODk4OGQxNWU5NDE3MzVcbi8vIFNjZW5pYyBMb29rb3V0OiA0YmY1OGRkOGQ0ODk4OGQxNjU5NDE3MzVcbi8vIFNrYXRlIFBhcms6IDRiZjU4ZGQ4ZDQ4OTg4ZDE2Nzk0MTczNVxuXG5cbi8vIElkZW50aWZpZXJzXG4vLyBFdmVyeSBJRCBwcmVmaXhlZCB3aXRoICdqcycgaXMgYSBET00gZWxlbWVudFxuY29uc3QganNDYXREcm9wZG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc0NhdERyb3Bkb3duJyk7XG5jb25zdCBqc0NhdFRyZW5kaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzQ2F0VHJlbmRpbmcnKTtcbmNvbnN0IGpzQ2F0UGFya3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNDYXRQYXJrcycpO1xuY29uc3QganNDYXRCZWFjaGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzQ2F0QmVhY2hlcycpO1xuY29uc3QganNDYXRMb29rb3V0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc0NhdExvb2tvdXRzJyk7XG4vLyBUaW0ncyB3b3JrIEVORFxuXG4kKGZ1bmN0aW9uKCl7XG5cbi8vIERldGVjdCBzY3JlZW4gd2lkdGggYW5kIGNoYW5nZSB6b29tIGFjY29yZGluZ2x5IC0gYnkgTmlraXRhXG5cdGxldCB6b29tID0gMTE7XG5cblx0aWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICBcdFx0bGV0IHpvb20gPSAxMDtcbiAgIFx0XHRjb25zb2xlLmxvZygnbGVzcyB0aGFuIDc2OCcpO1xuICAgXHRcdGNyZWF0ZU1hcCh6b29tKTtcblx0fVxuXHRlbHNlIHtcblx0ICAgbGV0IHpvb20gPSAxMTtcblx0ICAgY29uc29sZS5sb2coJ21vcmUgdGhhbiA3NjgnKTtcblx0ICAgY3JlYXRlTWFwKHpvb20pO1xuXHR9O1xufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZU1hcCh6KSB7XG5cbiAgLy8gaWRlbnRpZnkgdGhlIGV2ZW50IHRhcmdldFxuanNDYXREcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gIGlkZW50aWZ5Q2F0ZWdvcnkoZS50YXJnZXQpO1xufSk7XG5cblxuLy8gTWFwIHdvcmsgYnkgTmlraXRhIFNUQVJUXG5sZXQgY2VudGVyID0gWy0zNi44OTc3OTMxLCAxNzQuNzg1NDk3M107XG5sZXQgbXltYXAgPSBMLm1hcCgnbWFwaWQnKS5zZXRWaWV3KGNlbnRlciwgeik7XG5cbkwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaWRHaGhiSGw0T1RBaUxDSmhJam9pWTJvMllqZHJaSFJsTVdKbVlqSnliRGQyY1cxclluVm5OU0o5LmpfRFFMZml4SGZoaW9Wakg2cW1xa3cnLCB7XG4gICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCBJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgIG1heFpvb206IDE4LFxuICAgIGlkOiAnbWFwYm94LnN0cmVldHMnLFxuICAgIGFjY2Vzc1Rva2VuOiAncGsuZXlKMUlqb2libWxyYVhSaGFHOXBibVZ6SWl3aVlTSTZJbU5xYzIwM2NITjVOREV3YUdnME9YQnBZbkUwYVhoaFptWWlmUS41OGw4ZFVaZzR1aUZuN0JZblpDSkZBJ1xufSkuYWRkVG8obXltYXApO1xuXG4vLyByYWRpdXNcbkwuY2lyY2xlKGNlbnRlciwge1xuXHRcdHJhZGl1czogMjE1MDAsXG5cdFx0Y29sb3I6ICdzYWxtb24nLFxuXHRcdHdlaWdodDogMSxcblx0XHRmaWxsOiB0cnVlXG5cdH0pLmFkZFRvKG15bWFwKTtcblxuLy8gTWFwIHdvcmsgYnkgTmlraXRhIEVORFxuXG5cbi8vTG91ZWxsYVxubW9kYWwoKTtcblxuICBcbn07XG5cbi8vIFdvcmsgZnJvbSBMb3VlbGxhXG5cbmNvbnN0IHZlcnNpb24gPSAnP3Y9MjAxNzA5MDEnO1xuY29uc3Qga2V5ID0gdmVyc2lvbiArIGNsaWVudF9pZCArIGNsaWVudF9zZWNyZXQ7XG5jb25zdCB2ZW51ZUlkID0gJzU5YTQ1OTIxMzUxZTNkNDNiMDcwMjhiNSc7XG5jb25zdCB2ZW51ZVVybCA9ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvJyArIHZlbnVlSWQ7XG5cbi8vIE1vZGFsIGlkZW50aWZpZXJzXG5jb25zdCBqc1BvcFVwQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJyNtb2RhbENlbnRlcicpO1xuY29uc3QganNNb2RhbExvbmdUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc01vZGFsTG9uZ1RpdGxlJyk7XG5jb25zdCBqc1ZlbnVlSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzVmVudWVJbWcnKTtcbmNvbnN0IGpzVmVudWVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc1ZlbnVlRGVzY3JpcHRpb24nKTtcbmNvbnN0IGpzVmVudWVXZWJzaXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzVmVudWVXZWJzaXRlJyk7XG5jb25zdCBqc01pbmlNYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNNaW5pTWFwJyk7XG5jb25zdCBqc0RpcmVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNEaXJlY3Rpb25zJyk7XG5cbi8vIExvYWQgbW9kYWxcbmZ1bmN0aW9uIG1vZGFsKCkge1xuICAgICQoJyNtb2RhbENlbnRlcicpLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9BZGQgdmVudWUgZGV0YWlscyB0aHJvdWdoIEFQSSBjYWxsXG4gICAgICAgIHNob3dWZW51ZURldGFpbHMoKTtcbiAgICB9KTtcbn1cblxuLy8gT24gQ2xpY2sgb2YgZWFjaCBtYXJrZXIgLSBtYWtlIEFKQVggcmVxdWVzdCBmb3IgTWFya2VycyBWZW51ZSBkYXRhXG5mdW5jdGlvbiBzaG93VmVudWVEZXRhaWxzKCkge1xuICAgIGxldCB2ZW51ZVVybCA9ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvJyArIHRoaXMudmVudWVpZCArIGtleTtcblxuICAgIC8vIGFqYXggcmVxdWVzdCBmb3IgZWFjaCB2ZW51ZSBkYXRhXG4gICAgJC5hamF4KHtcblxuICAgICAgICB1cmw6IHZlbnVlVXJsLFxuICAgICAgICBkYXRhVHlwZTogJ2pzb25wJyxcblxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cbiAgICAgICAgICAgIC8vIEV4cG9zZSBkYXRhIG9mIFZFTlVFIHdlIGp1c3QgQ0xJQ0tFRFxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcblxuICAgICAgICAgICAgLy9Gb3IgRWFjaCBWZW51ZVxuXG4gICAgICAgICAgICAvLyBNb2RhbCB0aXRsZVxuICAgICAgICAgICAganNNb2RhbExvbmdUaXRsZS5pbm5lckhUTUwocmVzLnJlc3BvbnNlLnZlbnVlLm5hbWUpO1xuXG4gICAgICAgICAgICAvLyBDbGVhci9yZXNldCBtb2RhbCBib2R5IGNvcHkgc28gaXQncyBlbXB0eSwgYmVmb3JlIHdlIGFkZCBuZXcgZGF0YVxuICAgICAgICAgICAgJCgnLm1vZGFsLWJvZHknKS5lbXB0eSgpO1xuICAgICAgICAgICAgJCgnLm1vZGFsLWZvb3RlcicpLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIC8vIFZlbnVlIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBpZiAocmVzLnJlc3BvbnNlLnZlbnVlLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBqc1ZlbnVlRGVzY3JpcHRpb24uaW5uZXJIVE1MKHJlcy5yZXNwb25zZS52ZW51ZS5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vQ29uc3RydWN0IG1vZGFsIGltYWdlL1xuICAgICAgICAgICAgaWYgKHJlcy5yZXNwb25zZS52ZW51ZS5waG90b3MuZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcGhvdG9QcmVmaXggPSByZXMucmVzcG9uc2UudmVudWUuYmVzdFBob3RvLnByZWZpeDtcbiAgICAgICAgICAgICAgICB2YXIgcGhvdG9TdWZmaXggPSByZXMucmVzcG9uc2UudmVudWUuYmVzdFBob3RvLnN1ZmZpeDtcbiAgICAgICAgICAgICAgICBqc1ZlbnVlSW1nLnNyYyhwaG90b1ByZWZpeCArICcxMDB4MTAwJyArIHBob3RvU3VmZml4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIFBob25lXG4gICAgICAgICAgICBpZiAocmVzLnJlc3BvbnNlLnZlbnVlLmNvbnRhY3QucGhvbmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICQoJy5tb2RhbC1ib2R5JykuYXBwZW5kKCc8cCBjbGFzcz1cInBob25lXCI+PHNwYW4gY2xhc3M9XCJib2xkXCI+UGhvbmU6PC9zcGFuPiAnICsgcmVzLnJlc3BvbnNlLnZlbnVlLmNvbnRhY3QucGhvbmUgKyAnPC9wPicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWRkcmVzc1xuICAgICAgICAgICAgaWYgKHJlcy5yZXNwb25zZS52ZW51ZS5sb2NhdGlvbi5hZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBqc1ZlbnVlV2Vic2l0ZS5pbm5lckhUTUwocmVzLnJlc3BvbnNlLnZlbnVlLmxvY2F0aW9uLmFkZHJlc3MgKyAnLCAnICsgcmVzLnJlc3BvbnNlLnZlbnVlLmxvY2F0aW9uLmNpdHkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluc2VydCBNaW5pIG1hcCB3aXRoIHVzZXIgbG9jYXRpb24gaHR0cHM6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS0xLjAuMC5odG1sXG4gICAgICAgICAgICBsZXQgdXNlckxvY2F0aW9uID0gWy0zNi44OTc3OTMxLCAxNzQuNzg1NDk3M107XG4gICAgICAgICAgICBsZXQgbWluaU1hcCA9IEwubWFwKCdqc01pbmlNYXAnLCB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICAgICAgfSkuc2V0Vmlldyh1c2VyTG9jYXRpb24sIDE3KTtcbiAgICAgICAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj17YWNjZXNzVG9rZW59Jywge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9cIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsIDxhIGhyZWY9XCJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi4wL1wiPkNDLUJZLVNBPC9hPiwgSW1hZ2VyeSDCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIj5NYXBib3g8L2E+JyxcbiAgICAgICAgICAgICAgICBtYXhab29tOiAxOCxcbiAgICAgICAgICAgICAgICBpZDogJ21hcGJveC5zdHJlZXRzJyxcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogJ3BrLmV5SjFJam9pYm1scmFYUmhhRzlwYm1Weklpd2lZU0k2SW1OcWMyMDNjSE41TkRFd2FHZzBPWEJwWW5FMGFYaGhabVlpZlEuNThsOGRVWmc0dWlGbjdCWW5aQ0pGQSdcbiAgICAgICAgICAgIH0pLmFkZFRvKG1pbmlNYXApO1xuXG4gICAgICAgICAgICAvLyBOb3cgdG9nZ2xlIHRoZSBNb2RhbFxuICAgICAgICAgICAgJCgnI215TW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXG4gICAgICAgIH0gLy8gRW5kIFN1Y2Nlc3NcblxuICAgIH0pOyAvLyBFTkQgQUpBWCByZXF1ZXN0IGZvciB2ZW51ZSBkYXRhXG59XG5cbiJdfQ==
=======
// Foursquare API Credentials - Tim
const client_id = '&client_id=' + 'Q5PQQNTJS4UGM10I1RWODUVC4XS2PBULBDYZKFLAFECJ4ZIM';
const client_secret = '&client_secret=' + '4TMTXMB4LL35O3GR1QXONNBAJ5OCGZUO5HLWAQQGSHHPZZV2';

// // Foursquare API Credentials - Nikita
// const client_id = '&client_id=' + '2F1JEBGBXWUCCK1VS5OZAFT2BELR15OCVOBRDEVCJFKQNDGM';
// const client_secret = '&client_secret=' + 'UIK2BOJFZ1OEZJRBIMW35SOGRB1LFETJVWICBAVBE4JJVCJP';

// // Foursquare API Credentials - Louella
// const client_id = '&client_id=' + 'JSBCLUKSAG3BD0D1BOIRNAEMKWTQY0P401LJCYETQQXBS3W0';
// const client_secret = '&client_secret=' + 'HSRPRSP1SQJWTG3NN2EOBPCASHO52SBOU4ZPFXOJPZYIL3DK';
// Step 2 - Link the html element to the foursquare category ID
function identifyCategory(e) {
  // declare variables
  let chosenRadius = '0';
  let chosenCategory = '0';
  // simple conditional to match the DOM element to the api ID
  if (e.id == 'jsCatParks') {
    chosenRadius = '2000';
    chosenCategory = '4bf58dd8d48988d163941735';
    createSearchRequestURI(chosenRadius, chosenCategory);

  } else if (e.id == 'jsCatBeaches') {
    chosenRadius = '2000';
    chosenCategory = '4bf58dd8d48988d1e2941735';
    createSearchRequestURI(chosenRadius, chosenCategory);

  } else if (e.id == 'jsCatLookouts') {
    chosenRadius = '2000';
    chosenCategory = '4bf58dd8d48988d165941735';
    createSearchRequestURI(chosenRadius, chosenCategory);
  }
}


// Step 3 - Create the search query request uri
function createSearchRequestURI(rad, cat) {
  const baseURI = 'https://api.foursquare.com/v2/venues/search?v=20170901';
  // const client_id = '&client_id=' + 'Q5PQQNTJS4UGM10I1RWODUVC4XS2PBULBDYZKFLAFECJ4ZIM';
  // const client_secret = '&client_secret=' + '4TMTXMB4LL35O3GR1QXONNBAJ5OCGZUO5HLWAQQGSHHPZZV2';
  const latlong = '&ll=' + '-36.8786499,174.7602798';
  // This value will be a variable
  const radius = '&radius=' + rad;
  // This value will be a variable
  const categoryId = '&categoryId=' + cat;
  // Put all the pieces together
  const requestURI = baseURI + client_id + client_secret + latlong + radius + categoryId;
  
  makeSearchRequest(requestURI);
}


// Step 4 - Make the actual request
function makeSearchRequest(uri) {
  fetch(uri)
    .then(function(response) {
      return response.json();
    })
    .then(function(myJson) {
      extractNeededData(myJson.response.venues);
      //console.log(myJson.response.venues);
    })
    .catch(function(error) {
      // Code for handling errors
      console.log(error);
    });
}


// Step 5 - Extract the data we are using from the json response
function extractNeededData(data) {

  // declare empty array
  const venuesForMap = [];

  // Loop through json response
  data.forEach(venue => {

    // Push the name, ID, and latlng into an array to use for the map
    venuesForMap.push({
      name: venue.name,
      id: venue.id,
      latlng: 
        [
          venue.location.lat,
          venue.location.lng
        ]
      
    });
  });

  createMap(venuesForMap);
}




  
// Tim's work START
// Categories:
// Parks: 4bf58dd8d48988d163941735
// Beaches: 4bf58dd8d48988d1e2941735
// Pools: 4bf58dd8d48988d15e941735
// Scenic Lookout: 4bf58dd8d48988d165941735
// Skate Park: 4bf58dd8d48988d167941735


// Identifiers
// Every ID prefixed with 'js' is a DOM element
const jsCatDropdown = document.getElementById('jsCatDropdown');
const jsCatTrending = document.getElementById('jsCatTrending');
const jsCatParks = document.getElementById('jsCatParks');
const jsCatBeaches = document.getElementById('jsCatBeaches');
const jsCatLookouts = document.getElementById('jsCatLookouts');
// this needs to be a global variable in order to access it from different functions
let mymap;
let zoom = 0;
// Tim's work END


// Louella's Work START - Modal pop up
const jsModalLongTitle = document.getElementById('jsModalLongTitle');
const jsVenueDescription = document.getElementById('jsVenueDescription');
const jsVenueWebsite = document.getElementById('jsVenueWebsite');
const jsMiniMap = document.getElementById('jsMiniMap');
// Louella's Work END - Modal pop up


document.addEventListener("DOMContentLoaded", () => {
  console.log("DOM ready!");

  // identify the event target
  jsCatDropdown.addEventListener('click', (e) => {
    identifyCategory(e.target);
  });

  // Load the empty map on page load
  createInitialMap();
});


// Detect screen width and change zoom accordingly - by Nikita
function detectScreenWidth() {

  if ($(window).width() < 768) {
    let zoom = 10;
    console.log('screen size is less than 768px');
    return zoom;
  }
  else {
    let zoom = 11;
    console.log('screen size is less than 768px');
    return zoom;
  };
}


function createInitialMap() {

  // detect screen size
  let z = detectScreenWidth();

  // Map work by Nikita START
  let center = [-36.8977931, 174.7854973];
  mymap = L.map('mapid').setView(center, z);

  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidGhhbHl4OTAiLCJhIjoiY2o2YjdrZHRlMWJmYjJybDd2cW1rYnVnNSJ9.j_DQLfixHfhioVjH6qmqkw', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoibmlraXRhaG9pbmVzIiwiYSI6ImNqc203cHN5NDEwaGg0OXBpYnE0aXhhZmYifQ.58l8dUZg4uiFn7BYnZCJFA'
  }).addTo(mymap);

  // radius
  L.circle(center, {
    radius: 21500,
    color: 'salmon',
    weight: 1,
    fill: true
  }).addTo(mymap);
}


function createMap(v) {

  // detect screen size
  let z = detectScreenWidth();

  // remove previously loaded map first
  if(mymap) {
    mymap.remove();
  }

  // Map work by Nikita START
  let center = [-36.8977931, 174.7854973];
   mymap = L.map('mapid').setView(center, z);

  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidGhhbHl4OTAiLCJhIjoiY2o2YjdrZHRlMWJmYjJybDd2cW1rYnVnNSJ9.j_DQLfixHfhioVjH6qmqkw', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoibmlraXRhaG9pbmVzIiwiYSI6ImNqc203cHN5NDEwaGg0OXBpYnE0aXhhZmYifQ.58l8dUZg4uiFn7BYnZCJFA'
  }).addTo(mymap);

  // radius
  L.circle(center, {
    radius: 21500,
    color: 'salmon',
    weight: 1,
    fill: true
  }).addTo(mymap);

  // nikita - putting markers on the map
  v.forEach(function (venue) {
    try {
      var serviceIcon = L.icon({
        iconUrl: '../build/img/pin.svg',
        iconSize: [72, 72],
        popupAnchor: [0, -36]
      });
      var marker = L.marker(venue.latlng, { icon: serviceIcon }).addTo(mymap);
      marker.bindPopup('<div>' + venue.name + '</div>')

    } catch (error) {
      console.log(error);
    }
  });

   //Louella
   modal();

}


//Work from Louella

// foursquare Oauth
// const version = '?v=20170901';
// const clientid = '&client_id=JSBCLUKSAG3BD0D1BOIRNAEMKWTQY0P401LJCYETQQXBS3W0';
// const clientSecret = '&client_secret=HSRPRSP1SQJWTG3NN2EOBPCASHO52SBOU4ZPFXOJPZYIL3DK';
// const key = version + clientid + clientSecret;

// const venueId = '59a45921351e3d43b07028b5';
// const venueUrl = 'https://api.foursquare.com/v2/venues/' + venueId;


// Load modal
function modal() {
    $('#modalCenter').on('shown.bs.modal', function () {
        // Insert Mini map
        // https://leafletjs.com/reference-1.0.0.html
        let userLocation = [-36.8977931, 174.7854973];
        let miniMap = L.map('jsMiniMap', {
            scrollWheelZoom: false
        }).setView(userLocation, 17);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibmlraXRhaG9pbmVzIiwiYSI6ImNqc203cHN5NDEwaGg0OXBpYnE0aXhhZmYifQ.58l8dUZg4uiFn7BYnZCJFA'
        }).addTo(miniMap);
    });
}

// Load Carousel
$('.carousel').carousel();


// Ajax request to a specific venue
// let venueUrl = 'https://api.foursquare.com/v2/venues/explore' + key + '&ll=-36.8446152873055 , 174.76662397384644' + '&radius=60';
// $.ajax({

// 	url: venueUrl,
// 	dataType: 'jsonp',

// 	// let's show a little preloader to the user while they wait for a nice User Experience
// 	beforeSend: function(res) {
// 		$('<div class="pre-loader"> ... loading portfolio ... </div>').prependTo('body');
// 	},

// 	// when the ajax request is complete do all of these things
// 	success: function(res) {

// 		console.log(res);

// 		// Success! We can get rid of the preloader now...
// 		$('.pre-loader').detach();


// 	},

// 	// if the ajax request fails do these things as a fallback
// 	error: function(res) {
// 		$('<h1> Error!! </h1>').appendTo('body');
// 	}

// }); // END ajax request

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhcHAubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZvdXJzcXVhcmUgQVBJIENyZWRlbnRpYWxzIC0gVGltXG5jb25zdCBjbGllbnRfaWQgPSAnJmNsaWVudF9pZD0nICsgJ1E1UFFRTlRKUzRVR00xMEkxUldPRFVWQzRYUzJQQlVMQkRZWktGTEFGRUNKNFpJTSc7XG5jb25zdCBjbGllbnRfc2VjcmV0ID0gJyZjbGllbnRfc2VjcmV0PScgKyAnNFRNVFhNQjRMTDM1TzNHUjFRWE9OTkJBSjVPQ0daVU81SExXQVFRR1NISFBaWlYyJztcblxuLy8gLy8gRm91cnNxdWFyZSBBUEkgQ3JlZGVudGlhbHMgLSBOaWtpdGFcbi8vIGNvbnN0IGNsaWVudF9pZCA9ICcmY2xpZW50X2lkPScgKyAnMkYxSkVCR0JYV1VDQ0sxVlM1T1pBRlQyQkVMUjE1T0NWT0JSREVWQ0pGS1FOREdNJztcbi8vIGNvbnN0IGNsaWVudF9zZWNyZXQgPSAnJmNsaWVudF9zZWNyZXQ9JyArICdVSUsyQk9KRloxT0VaSlJCSU1XMzVTT0dSQjFMRkVUSlZXSUNCQVZCRTRKSlZDSlAnO1xuXG4vLyAvLyBGb3Vyc3F1YXJlIEFQSSBDcmVkZW50aWFscyAtIExvdWVsbGFcbi8vIGNvbnN0IGNsaWVudF9pZCA9ICcmY2xpZW50X2lkPScgKyAnSlNCQ0xVS1NBRzNCRDBEMUJPSVJOQUVNS1dUUVkwUDQwMUxKQ1lFVFFRWEJTM1cwJztcbi8vIGNvbnN0IGNsaWVudF9zZWNyZXQgPSAnJmNsaWVudF9zZWNyZXQ9JyArICdIU1JQUlNQMVNRSldURzNOTjJFT0JQQ0FTSE81MlNCT1U0WlBGWE9KUFpZSUwzREsnO1xuLy8gU3RlcCAyIC0gTGluayB0aGUgaHRtbCBlbGVtZW50IHRvIHRoZSBmb3Vyc3F1YXJlIGNhdGVnb3J5IElEXG5mdW5jdGlvbiBpZGVudGlmeUNhdGVnb3J5KGUpIHtcbiAgLy8gZGVjbGFyZSB2YXJpYWJsZXNcbiAgbGV0IGNob3NlblJhZGl1cyA9ICcwJztcbiAgbGV0IGNob3NlbkNhdGVnb3J5ID0gJzAnO1xuICAvLyBzaW1wbGUgY29uZGl0aW9uYWwgdG8gbWF0Y2ggdGhlIERPTSBlbGVtZW50IHRvIHRoZSBhcGkgSURcbiAgaWYgKGUuaWQgPT0gJ2pzQ2F0UGFya3MnKSB7XG4gICAgY2hvc2VuUmFkaXVzID0gJzIwMDAnO1xuICAgIGNob3NlbkNhdGVnb3J5ID0gJzRiZjU4ZGQ4ZDQ4OTg4ZDE2Mzk0MTczNSc7XG4gICAgY3JlYXRlU2VhcmNoUmVxdWVzdFVSSShjaG9zZW5SYWRpdXMsIGNob3NlbkNhdGVnb3J5KTtcblxuICB9IGVsc2UgaWYgKGUuaWQgPT0gJ2pzQ2F0QmVhY2hlcycpIHtcbiAgICBjaG9zZW5SYWRpdXMgPSAnMjAwMCc7XG4gICAgY2hvc2VuQ2F0ZWdvcnkgPSAnNGJmNThkZDhkNDg5ODhkMWUyOTQxNzM1JztcbiAgICBjcmVhdGVTZWFyY2hSZXF1ZXN0VVJJKGNob3NlblJhZGl1cywgY2hvc2VuQ2F0ZWdvcnkpO1xuXG4gIH0gZWxzZSBpZiAoZS5pZCA9PSAnanNDYXRMb29rb3V0cycpIHtcbiAgICBjaG9zZW5SYWRpdXMgPSAnMjAwMCc7XG4gICAgY2hvc2VuQ2F0ZWdvcnkgPSAnNGJmNThkZDhkNDg5ODhkMTY1OTQxNzM1JztcbiAgICBjcmVhdGVTZWFyY2hSZXF1ZXN0VVJJKGNob3NlblJhZGl1cywgY2hvc2VuQ2F0ZWdvcnkpO1xuICB9XG59XG5cblxuLy8gU3RlcCAzIC0gQ3JlYXRlIHRoZSBzZWFyY2ggcXVlcnkgcmVxdWVzdCB1cmlcbmZ1bmN0aW9uIGNyZWF0ZVNlYXJjaFJlcXVlc3RVUkkocmFkLCBjYXQpIHtcbiAgY29uc3QgYmFzZVVSSSA9ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvc2VhcmNoP3Y9MjAxNzA5MDEnO1xuICAvLyBjb25zdCBjbGllbnRfaWQgPSAnJmNsaWVudF9pZD0nICsgJ1E1UFFRTlRKUzRVR00xMEkxUldPRFVWQzRYUzJQQlVMQkRZWktGTEFGRUNKNFpJTSc7XG4gIC8vIGNvbnN0IGNsaWVudF9zZWNyZXQgPSAnJmNsaWVudF9zZWNyZXQ9JyArICc0VE1UWE1CNExMMzVPM0dSMVFYT05OQkFKNU9DR1pVTzVITFdBUVFHU0hIUFpaVjInO1xuICBjb25zdCBsYXRsb25nID0gJyZsbD0nICsgJy0zNi44Nzg2NDk5LDE3NC43NjAyNzk4JztcbiAgLy8gVGhpcyB2YWx1ZSB3aWxsIGJlIGEgdmFyaWFibGVcbiAgY29uc3QgcmFkaXVzID0gJyZyYWRpdXM9JyArIHJhZDtcbiAgLy8gVGhpcyB2YWx1ZSB3aWxsIGJlIGEgdmFyaWFibGVcbiAgY29uc3QgY2F0ZWdvcnlJZCA9ICcmY2F0ZWdvcnlJZD0nICsgY2F0O1xuICAvLyBQdXQgYWxsIHRoZSBwaWVjZXMgdG9nZXRoZXJcbiAgY29uc3QgcmVxdWVzdFVSSSA9IGJhc2VVUkkgKyBjbGllbnRfaWQgKyBjbGllbnRfc2VjcmV0ICsgbGF0bG9uZyArIHJhZGl1cyArIGNhdGVnb3J5SWQ7XG4gIFxuICBtYWtlU2VhcmNoUmVxdWVzdChyZXF1ZXN0VVJJKTtcbn1cblxuXG4vLyBTdGVwIDQgLSBNYWtlIHRoZSBhY3R1YWwgcmVxdWVzdFxuZnVuY3Rpb24gbWFrZVNlYXJjaFJlcXVlc3QodXJpKSB7XG4gIGZldGNoKHVyaSlcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uKG15SnNvbikge1xuICAgICAgZXh0cmFjdE5lZWRlZERhdGEobXlKc29uLnJlc3BvbnNlLnZlbnVlcyk7XG4gICAgICAvL2NvbnNvbGUubG9nKG15SnNvbi5yZXNwb25zZS52ZW51ZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAvLyBDb2RlIGZvciBoYW5kbGluZyBlcnJvcnNcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KTtcbn1cblxuXG4vLyBTdGVwIDUgLSBFeHRyYWN0IHRoZSBkYXRhIHdlIGFyZSB1c2luZyBmcm9tIHRoZSBqc29uIHJlc3BvbnNlXG5mdW5jdGlvbiBleHRyYWN0TmVlZGVkRGF0YShkYXRhKSB7XG5cbiAgLy8gZGVjbGFyZSBlbXB0eSBhcnJheVxuICBjb25zdCB2ZW51ZXNGb3JNYXAgPSBbXTtcblxuICAvLyBMb29wIHRocm91Z2gganNvbiByZXNwb25zZVxuICBkYXRhLmZvckVhY2godmVudWUgPT4ge1xuXG4gICAgLy8gUHVzaCB0aGUgbmFtZSwgSUQsIGFuZCBsYXRsbmcgaW50byBhbiBhcnJheSB0byB1c2UgZm9yIHRoZSBtYXBcbiAgICB2ZW51ZXNGb3JNYXAucHVzaCh7XG4gICAgICBuYW1lOiB2ZW51ZS5uYW1lLFxuICAgICAgaWQ6IHZlbnVlLmlkLFxuICAgICAgbGF0bG5nOiBcbiAgICAgICAgW1xuICAgICAgICAgIHZlbnVlLmxvY2F0aW9uLmxhdCxcbiAgICAgICAgICB2ZW51ZS5sb2NhdGlvbi5sbmdcbiAgICAgICAgXVxuICAgICAgXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNyZWF0ZU1hcCh2ZW51ZXNGb3JNYXApO1xufVxuXG5cblxuXG4gIFxuLy8gVGltJ3Mgd29yayBTVEFSVFxuLy8gQ2F0ZWdvcmllczpcbi8vIFBhcmtzOiA0YmY1OGRkOGQ0ODk4OGQxNjM5NDE3MzVcbi8vIEJlYWNoZXM6IDRiZjU4ZGQ4ZDQ4OTg4ZDFlMjk0MTczNVxuLy8gUG9vbHM6IDRiZjU4ZGQ4ZDQ4OTg4ZDE1ZTk0MTczNVxuLy8gU2NlbmljIExvb2tvdXQ6IDRiZjU4ZGQ4ZDQ4OTg4ZDE2NTk0MTczNVxuLy8gU2thdGUgUGFyazogNGJmNThkZDhkNDg5ODhkMTY3OTQxNzM1XG5cblxuLy8gSWRlbnRpZmllcnNcbi8vIEV2ZXJ5IElEIHByZWZpeGVkIHdpdGggJ2pzJyBpcyBhIERPTSBlbGVtZW50XG5jb25zdCBqc0NhdERyb3Bkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzQ2F0RHJvcGRvd24nKTtcbmNvbnN0IGpzQ2F0VHJlbmRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNDYXRUcmVuZGluZycpO1xuY29uc3QganNDYXRQYXJrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc0NhdFBhcmtzJyk7XG5jb25zdCBqc0NhdEJlYWNoZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNDYXRCZWFjaGVzJyk7XG5jb25zdCBqc0NhdExvb2tvdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzQ2F0TG9va291dHMnKTtcbi8vIHRoaXMgbmVlZHMgdG8gYmUgYSBnbG9iYWwgdmFyaWFibGUgaW4gb3JkZXIgdG8gYWNjZXNzIGl0IGZyb20gZGlmZmVyZW50IGZ1bmN0aW9uc1xubGV0IG15bWFwO1xubGV0IHpvb20gPSAwO1xuLy8gVGltJ3Mgd29yayBFTkRcblxuXG4vLyBMb3VlbGxhJ3MgV29yayBTVEFSVCAtIE1vZGFsIHBvcCB1cFxuY29uc3QganNNb2RhbExvbmdUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc01vZGFsTG9uZ1RpdGxlJyk7XG5jb25zdCBqc1ZlbnVlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNWZW51ZURlc2NyaXB0aW9uJyk7XG5jb25zdCBqc1ZlbnVlV2Vic2l0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc1ZlbnVlV2Vic2l0ZScpO1xuY29uc3QganNNaW5pTWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzTWluaU1hcCcpO1xuLy8gTG91ZWxsYSdzIFdvcmsgRU5EIC0gTW9kYWwgcG9wIHVwXG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcIkRPTSByZWFkeSFcIik7XG5cbiAgLy8gaWRlbnRpZnkgdGhlIGV2ZW50IHRhcmdldFxuICBqc0NhdERyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZGVudGlmeUNhdGVnb3J5KGUudGFyZ2V0KTtcbiAgfSk7XG5cbiAgLy8gTG9hZCB0aGUgZW1wdHkgbWFwIG9uIHBhZ2UgbG9hZFxuICBjcmVhdGVJbml0aWFsTWFwKCk7XG59KTtcblxuXG4vLyBEZXRlY3Qgc2NyZWVuIHdpZHRoIGFuZCBjaGFuZ2Ugem9vbSBhY2NvcmRpbmdseSAtIGJ5IE5pa2l0YVxuZnVuY3Rpb24gZGV0ZWN0U2NyZWVuV2lkdGgoKSB7XG5cbiAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzY4KSB7XG4gICAgbGV0IHpvb20gPSAxMDtcbiAgICBjb25zb2xlLmxvZygnc2NyZWVuIHNpemUgaXMgbGVzcyB0aGFuIDc2OHB4Jyk7XG4gICAgcmV0dXJuIHpvb207XG4gIH1cbiAgZWxzZSB7XG4gICAgbGV0IHpvb20gPSAxMTtcbiAgICBjb25zb2xlLmxvZygnc2NyZWVuIHNpemUgaXMgbGVzcyB0aGFuIDc2OHB4Jyk7XG4gICAgcmV0dXJuIHpvb207XG4gIH07XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlSW5pdGlhbE1hcCgpIHtcblxuICAvLyBkZXRlY3Qgc2NyZWVuIHNpemVcbiAgbGV0IHogPSBkZXRlY3RTY3JlZW5XaWR0aCgpO1xuXG4gIC8vIE1hcCB3b3JrIGJ5IE5pa2l0YSBTVEFSVFxuICBsZXQgY2VudGVyID0gWy0zNi44OTc3OTMxLCAxNzQuNzg1NDk3M107XG4gIG15bWFwID0gTC5tYXAoJ21hcGlkJykuc2V0VmlldyhjZW50ZXIsIHopO1xuXG4gIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaWRHaGhiSGw0T1RBaUxDSmhJam9pWTJvMllqZHJaSFJsTVdKbVlqSnliRGQyY1cxclluVm5OU0o5LmpfRFFMZml4SGZoaW9Wakg2cW1xa3cnLCB7XG4gICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCBJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgIG1heFpvb206IDE4LFxuICAgIGlkOiAnbWFwYm94LnN0cmVldHMnLFxuICAgIGFjY2Vzc1Rva2VuOiAncGsuZXlKMUlqb2libWxyYVhSaGFHOXBibVZ6SWl3aVlTSTZJbU5xYzIwM2NITjVOREV3YUdnME9YQnBZbkUwYVhoaFptWWlmUS41OGw4ZFVaZzR1aUZuN0JZblpDSkZBJ1xuICB9KS5hZGRUbyhteW1hcCk7XG5cbiAgLy8gcmFkaXVzXG4gIEwuY2lyY2xlKGNlbnRlciwge1xuICAgIHJhZGl1czogMjE1MDAsXG4gICAgY29sb3I6ICdzYWxtb24nLFxuICAgIHdlaWdodDogMSxcbiAgICBmaWxsOiB0cnVlXG4gIH0pLmFkZFRvKG15bWFwKTtcbn1cblxuXG5mdW5jdGlvbiBjcmVhdGVNYXAodikge1xuXG4gIC8vIGRldGVjdCBzY3JlZW4gc2l6ZVxuICBsZXQgeiA9IGRldGVjdFNjcmVlbldpZHRoKCk7XG5cbiAgLy8gcmVtb3ZlIHByZXZpb3VzbHkgbG9hZGVkIG1hcCBmaXJzdFxuICBpZihteW1hcCkge1xuICAgIG15bWFwLnJlbW92ZSgpO1xuICB9XG5cbiAgLy8gTWFwIHdvcmsgYnkgTmlraXRhIFNUQVJUXG4gIGxldCBjZW50ZXIgPSBbLTM2Ljg5Nzc5MzEsIDE3NC43ODU0OTczXTtcbiAgIG15bWFwID0gTC5tYXAoJ21hcGlkJykuc2V0VmlldyhjZW50ZXIsIHopO1xuXG4gIEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaWRHaGhiSGw0T1RBaUxDSmhJam9pWTJvMllqZHJaSFJsTVdKbVlqSnliRGQyY1cxclluVm5OU0o5LmpfRFFMZml4SGZoaW9Wakg2cW1xa3cnLCB7XG4gICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCBJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgIG1heFpvb206IDE4LFxuICAgIGlkOiAnbWFwYm94LnN0cmVldHMnLFxuICAgIGFjY2Vzc1Rva2VuOiAncGsuZXlKMUlqb2libWxyYVhSaGFHOXBibVZ6SWl3aVlTSTZJbU5xYzIwM2NITjVOREV3YUdnME9YQnBZbkUwYVhoaFptWWlmUS41OGw4ZFVaZzR1aUZuN0JZblpDSkZBJ1xuICB9KS5hZGRUbyhteW1hcCk7XG5cbiAgLy8gcmFkaXVzXG4gIEwuY2lyY2xlKGNlbnRlciwge1xuICAgIHJhZGl1czogMjE1MDAsXG4gICAgY29sb3I6ICdzYWxtb24nLFxuICAgIHdlaWdodDogMSxcbiAgICBmaWxsOiB0cnVlXG4gIH0pLmFkZFRvKG15bWFwKTtcblxuICAvLyBuaWtpdGEgLSBwdXR0aW5nIG1hcmtlcnMgb24gdGhlIG1hcFxuICB2LmZvckVhY2goZnVuY3Rpb24gKHZlbnVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBzZXJ2aWNlSWNvbiA9IEwuaWNvbih7XG4gICAgICAgIGljb25Vcmw6ICcuLi9idWlsZC9pbWcvcGluLnN2ZycsXG4gICAgICAgIGljb25TaXplOiBbNzIsIDcyXSxcbiAgICAgICAgcG9wdXBBbmNob3I6IFswLCAtMzZdXG4gICAgICB9KTtcbiAgICAgIHZhciBtYXJrZXIgPSBMLm1hcmtlcih2ZW51ZS5sYXRsbmcsIHsgaWNvbjogc2VydmljZUljb24gfSkuYWRkVG8obXltYXApO1xuICAgICAgbWFya2VyLmJpbmRQb3B1cCgnPGRpdj4nICsgdmVudWUubmFtZSArICc8L2Rpdj4nKVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG4gIH0pO1xuXG4gICAvL0xvdWVsbGFcbiAgIG1vZGFsKCk7XG5cbn1cblxuXG4vL1dvcmsgZnJvbSBMb3VlbGxhXG5cbi8vIGZvdXJzcXVhcmUgT2F1dGhcbi8vIGNvbnN0IHZlcnNpb24gPSAnP3Y9MjAxNzA5MDEnO1xuLy8gY29uc3QgY2xpZW50aWQgPSAnJmNsaWVudF9pZD1KU0JDTFVLU0FHM0JEMEQxQk9JUk5BRU1LV1RRWTBQNDAxTEpDWUVUUVFYQlMzVzAnO1xuLy8gY29uc3QgY2xpZW50U2VjcmV0ID0gJyZjbGllbnRfc2VjcmV0PUhTUlBSU1AxU1FKV1RHM05OMkVPQlBDQVNITzUyU0JPVTRaUEZYT0pQWllJTDNESyc7XG4vLyBjb25zdCBrZXkgPSB2ZXJzaW9uICsgY2xpZW50aWQgKyBjbGllbnRTZWNyZXQ7XG5cbi8vIGNvbnN0IHZlbnVlSWQgPSAnNTlhNDU5MjEzNTFlM2Q0M2IwNzAyOGI1Jztcbi8vIGNvbnN0IHZlbnVlVXJsID0gJ2h0dHBzOi8vYXBpLmZvdXJzcXVhcmUuY29tL3YyL3ZlbnVlcy8nICsgdmVudWVJZDtcblxuXG4vLyBMb2FkIG1vZGFsXG5mdW5jdGlvbiBtb2RhbCgpIHtcbiAgICAkKCcjbW9kYWxDZW50ZXInKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEluc2VydCBNaW5pIG1hcFxuICAgICAgICAvLyBodHRwczovL2xlYWZsZXRqcy5jb20vcmVmZXJlbmNlLTEuMC4wLmh0bWxcbiAgICAgICAgbGV0IHVzZXJMb2NhdGlvbiA9IFstMzYuODk3NzkzMSwgMTc0Ljc4NTQ5NzNdO1xuICAgICAgICBsZXQgbWluaU1hcCA9IEwubWFwKCdqc01pbmlNYXAnLCB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH0pLnNldFZpZXcodXNlckxvY2F0aW9uLCAxNyk7XG5cbiAgICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXthY2Nlc3NUb2tlbn0nLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvXCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCA8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC9cIj5DQy1CWS1TQTwvYT4sIEltYWdlcnkgwqkgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCI+TWFwYm94PC9hPicsXG4gICAgICAgICAgICBtYXhab29tOiAxOCxcbiAgICAgICAgICAgIGlkOiAnbWFwYm94LnN0cmVldHMnLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46ICdway5leUoxSWpvaWJtbHJhWFJoYUc5cGJtVnpJaXdpWVNJNkltTnFjMjAzY0hONU5ERXdhR2cwT1hCcFluRTBhWGhoWm1ZaWZRLjU4bDhkVVpnNHVpRm43QlluWkNKRkEnXG4gICAgICAgIH0pLmFkZFRvKG1pbmlNYXApO1xuICAgIH0pO1xufVxuXG4vLyBMb2FkIENhcm91c2VsXG4kKCcuY2Fyb3VzZWwnKS5jYXJvdXNlbCgpO1xuXG5cbi8vIEFqYXggcmVxdWVzdCB0byBhIHNwZWNpZmljIHZlbnVlXG4vLyBsZXQgdmVudWVVcmwgPSAnaHR0cHM6Ly9hcGkuZm91cnNxdWFyZS5jb20vdjIvdmVudWVzL2V4cGxvcmUnICsga2V5ICsgJyZsbD0tMzYuODQ0NjE1Mjg3MzA1NSAsIDE3NC43NjY2MjM5NzM4NDY0NCcgKyAnJnJhZGl1cz02MCc7XG4vLyAkLmFqYXgoe1xuXG4vLyBcdHVybDogdmVudWVVcmwsXG4vLyBcdGRhdGFUeXBlOiAnanNvbnAnLFxuXG4vLyBcdC8vIGxldCdzIHNob3cgYSBsaXR0bGUgcHJlbG9hZGVyIHRvIHRoZSB1c2VyIHdoaWxlIHRoZXkgd2FpdCBmb3IgYSBuaWNlIFVzZXIgRXhwZXJpZW5jZVxuLy8gXHRiZWZvcmVTZW5kOiBmdW5jdGlvbihyZXMpIHtcbi8vIFx0XHQkKCc8ZGl2IGNsYXNzPVwicHJlLWxvYWRlclwiPiAuLi4gbG9hZGluZyBwb3J0Zm9saW8gLi4uIDwvZGl2PicpLnByZXBlbmRUbygnYm9keScpO1xuLy8gXHR9LFxuXG4vLyBcdC8vIHdoZW4gdGhlIGFqYXggcmVxdWVzdCBpcyBjb21wbGV0ZSBkbyBhbGwgb2YgdGhlc2UgdGhpbmdzXG4vLyBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuXG4vLyBcdFx0Y29uc29sZS5sb2cocmVzKTtcblxuLy8gXHRcdC8vIFN1Y2Nlc3MhIFdlIGNhbiBnZXQgcmlkIG9mIHRoZSBwcmVsb2FkZXIgbm93Li4uXG4vLyBcdFx0JCgnLnByZS1sb2FkZXInKS5kZXRhY2goKTtcblxuXG4vLyBcdH0sXG5cbi8vIFx0Ly8gaWYgdGhlIGFqYXggcmVxdWVzdCBmYWlscyBkbyB0aGVzZSB0aGluZ3MgYXMgYSBmYWxsYmFja1xuLy8gXHRlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4vLyBcdFx0JCgnPGgxPiBFcnJvciEhIDwvaDE+JykuYXBwZW5kVG8oJ2JvZHknKTtcbi8vIFx0fVxuXG4vLyB9KTsgLy8gRU5EIGFqYXggcmVxdWVzdFxuIl0sImZpbGUiOiJhcHAubWluLmpzIn0=
>>>>>>> 5e2db60999559095a6630ffae1fee633a0f45560
